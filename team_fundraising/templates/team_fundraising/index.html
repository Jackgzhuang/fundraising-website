{% extends "base.html" %}
{% load static %}
{% load humanize %}

{% block content %}
<br/>
<h3>{{ campaign.name }}</h3>
Climbing three mountains to raise money for Children's Hospital!
<br/><br/>
<h3>
    ${{ total_raised|floatformat:"0"|intcomma }} 
    <small>of ${{ campaign.goal|floatformat:"0"|intcomma }} raised</small>
</h3>
<br/>

    <!-- Search form -->
    <form class="form-inline">
        <div class="col-xs-4">
            <i class="fa fa-search" aria-hidden="true"></i>
            <input id="search" class="form-control form-control-sm ml-3 w-85" 
                type="text" placeholder="Search for a fundraiser" aria-label="Search" 
                onkeyup="filterList()">
        </div>
    </form>
    <br/>
    Click on a fundraiser to donate:
    <br/>

    <div class="container">
      <div class="d-flex flex-wrap justify-content-start">
        {% for fundraiser in fundraisers %}

            <div class="card mt-3 mr-1" style="width: 160px;"">
              {% if fundraiser.photo %}
                <img class="card-img-top circle-image-small" src="{{ fundraiser.photo.url }}" alt="Card image cap" width="150" height="150">
              {% else %}
                <img class="card-img-top circle-image-small" src="{% static "nophoto.png" %}" alt="Card image cap" width="150" height="150">
              {% endif %}
              <div class="card-body">
                <a href="{% url 'team_fundraising:fundraiser' fundraiser.id %}">
                    {{ fundraiser.name }}<br> 
                    ${{ fundraiser.total_raised|floatformat:"0"|intcomma }} 
                    <small>of ${{ fundraiser.goal|floatformat:"0"|intcomma }} </small>
                </a>
              </div>
            </div>
        {% endfor %}
      </div>
    </div>


    <br/>

<script>
function filterList() {
  // Declare variables
  var input, filter, ul, li, a, i, txtValue;
  input = document.getElementById('search');
  filter = input.value.toUpperCase();
  ul = document.getElementById("fundraiserlist");
  li = ul.getElementsByTagName('li');

  // Loop through all list items, and hide those who don't match the search query
  for (i = 0; i < li.length; i++) {
    a = li[i].getElementsByTagName("a")[0];
    txtValue = a.textContent || a.innerText;
    if (txtValue.toUpperCase().indexOf(filter) > -1) {
      li[i].style.display = "";
    } else {
      li[i].style.display = "none";
    }
  }
}
</script>

{% endblock %}
