{% extends 'base.html' %}
{% load static %}
{% load crispy_forms_tags %}

{% block head %}
<title>Join Triple Crown for Heart Fundraising</title> 
<style>
    th {
      height: 50px;
      vertical-align: top;
    }
</style>
<script src="//cdn.ckeditor.com/4.11.4/basic/ckeditor.js"></script>
{% endblock head %}
    

{% block content %}
<br/>
<h3> Join {{ campaign.name }}</h3>
Sign up to create your own fundraising page to raise money for the 
BC Children's Hospital Foundation and the Children's Heart Network.
<br/><br/>

{# show form errors at the top of the page #}
{% if user_form.errors %}
    {% for error in user_form.non_field_errors %}
        <div class="alert alert-danger">
            {{ error|escape }}
        </div>
    {% endfor %}
    {% for field in user_form %}
        {% for error in field.errors %}
            <div class="alert alert-danger">
                {{ error|escape }}
            </div>
        {% endfor %}
    {% endfor %}
{% endif %}

{% if fundraiser_form.errors %}
    {% for error in fundraiser_form.non_field_errors %}
        <div class="alert alert-danger">
            {{ error|escape }}
        </div>
    {% endfor %}
    {% for field in fundraiser_form %}
        {% for error in field.errors %}
            <div class="alert alert-danger">
                {{ error|escape }}
            </div>
        {% endfor %}
    {% endfor %}
{% endif %}


<form method="POST"  enctype="multipart/form-data">
    {% csrf_token %}
    {{ form|as_crispy_errors }}
    <input type="hidden" name="campaign" id="id_campaign" value="{{ campaign.id }}">

    <div class="form-group row">
        <label class="col-sm-4 col-form-label" for="{{ fundraiser_form.name.auto_id}}">{{ fundraiser_form.name.label }}:</label>
        <div class="col-sm-8">
            {{ fundraiser_form.name }}
            {% for error in fundraiser_form.name.errors %}
            <div class="alert alert-danger">
                {{ error|escape }}
            </div>
            {% endfor %}
        </div>
    </div>

    <div class="form-group row">
        <label class="col-sm-4 col-form-label" for="{{ fundraiser_form.goal.auto_id}}">{{ fundraiser_form.goal.label }}:</label>
        <div class="input-group col-sm-8">
            <div class="input-group-addon">
                <span class="input-group-text">$</span>
            </div>
           {{ fundraiser_form.goal }}
           {% for error in fundraiser_form.goal.errors %}
           <div class="alert alert-danger">
               {{ error|escape }}
           </div>
           {% endfor %}
        </div>
    </div>

    <div class="form-group row">
        <label class="col-sm-4 col-form-label" for="{{ fundraiser_form.message.auto_id}}">{{ fundraiser_form.message.label }}:</label>
        <div class="col-sm-8">
            <textarea name="message" cols="20" rows="3" maxlength="5000" class="form-control" id="id_message">
Welcome to my Triple Crown for Heart fundraising page!
<br><br>
On July 20th I will tackle all three North Shore Mountains (Seymour, Grouse and Cypress) 
by bike in the 10th annual Triple Crown for Heart. The ride benefits the BC Children's Hospital 
Heart Unit and Children's Heart Network to send kids to Camp Zajac. I would be grateful for your 
sponsorship and pledge of faith that I can do this!
<br><br>
Donations of $20 or more will receive a charitable donation tax receipt at the end of the year. 
Thanks for your consideration of support for this most worthy cause!
            </textarea>
        </div>
    </div>

    <div class="form-group row">
        <label class="col-sm-4 col-form-label" for="{{ fundraiser_form.photo.auto_id}}">{{ fundraiser_form.photo.label }}:</label>
        <div class="col-sm-8">
            {{ fundraiser_form.photo }}
            {% for error in fundraiser_form.photo.errors %}
            <div class="alert alert-danger">
                {{ error|escape }
            </div>
            {% endfor %}
        </div>
    </div>

    <div class="form-group row">
        <label class="col-sm-4 col-form-label" for="{{ user_form.email.auto_id}}">{{ user_form.email.label }}:</label>
        <div class="col-sm-8">
            {{ user_form.email }}
            {% for error in user_form.email.errors %}
            <div class="alert alert-danger">
               {{ error|escape }}
            </div>
            {% endfor %}
        </div>
    </div>

    <div class="form-group row">

        <label class="col-sm-4 col-form-label" for="{{ user_form.username.auto_id}}">{{ user_form.username.label }}:</label>
        <div class="col-sm-8">
            {{ user_form.username }}
            {% for error in user_form.username.errors %}
            <div class="alert alert-danger">
                {{ error|escape }}
            </div>
            {% endfor %}
    </div>
</div>

    <div class="form-group row">
        <label class="col-sm-4 col-form-label" for="{{ user_form.password1.auto_id}}">{{ user_form.password1.label }}:</label>
        <div class="col-sm-8">
            {{ user_form.password1 }}
            {% for error in user_form.password1.errors %}
            <div class="alert alert-danger">
                {{ error|escape }
            </div>
            {% endfor %}            <small id="hint_id_new_password1" class="form-text text-muted">
                <ul>
                    <li>Your password can't be too similar to your other personal information.</li>
                    <li>Your password must contain at least 8 characters.</li>
                    <li>Your password can't be a commonly used password.</li>
                    <li>Your password can't be entirely numeric.</li>
                </ul>
            </small>
        </div>
    </div>

    <div class="form-group row">
        <label class="col-sm-4 col-form-label" for="{{ user_form.password2.auto_id}}">{{ user_form.password2.label }}:</label>
        <div class="col-sm-8">
            {{ user_form.password2 }}
            {% for error in user_form.password2.errors %}
            <div class="alert alert-danger">
                {{ error|escape }}
            </div>
            {% endfor %}
        </div>
    </div>
    
    <button type="submit" class="btn btn-primary">Sign up</button>
    <script>
        CKEDITOR.replace( 'message', {
        height: 260,
      /* Default CKEditor styles are included as well to avoid copying default styles. */
      contentsCss: [
        'http://cdn.ckeditor.com/4.11.4/full-all/contents.css',
        '{% static "ck_editor_override.css  " %}'
      ]
    } );
    </script>
</form>

{% endblock content %}
